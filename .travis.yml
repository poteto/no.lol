language: node_js
node_js:
  - "11"

branches:
  only:
    - master
    - staging # This is where pull requests from "bors r+" are built.
    - trying # This is where pull requests from "bors try" are built.

cache:
  yarn: true
  directories:
    - node_modules

notifications:
  email: false

# https://github.com/browniebroke/carriere-web/blob/master/.travis.yml
matrix:
  include:
    - name: Performance
      script: |
        if [ "$TRAVIS_PULL_REQUEST" != "false" ]
          then sleep 200; yarn run lh \
          --perf 90 \
          --pwa 90 \
          --a11y 90 \
          --bp 90 \
          --seo 90 \
          https://deploy-preview-${TRAVIS_PULL_REQUEST}--no-lol.netlify.com
        fi
    - name: Test
      script: yarn test